
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.2.3, mkdocs-material-7.3.4" name="generator"/>
<title>Automatische Testverfahren - edi.substanceforms</title>
<link href="../assets/stylesheets/main.db9e7362.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.3f5d1f46.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#automatische-testverfahren">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="edi.substanceforms" class="md-header__button md-logo" data-md-component="logo" href=".." title="edi.substanceforms">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            edi.substanceforms
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Automatische Testverfahren
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="edi.substanceforms" class="md-nav__button md-logo" data-md-component="logo" href=".." title="edi.substanceforms">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    edi.substanceforms
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ausgang/">
        Ausgangssituation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../zielsetzung/">
        Zielsetzung
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../anforderungen/">
        Anforderungsanalye
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../bestandteile/">
        Bestandteile der Applikation
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../aufbau/">
        Aufbau des Software-Packages
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Automatische Testverfahren
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Automatische Testverfahren
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#scope-der-funktionstests">
    Scope der Funktionstests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-verzeichnis-im-package">
    Test-Verzeichnis im Package
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ausfuhrung-der-tests">
    Ausführung der Tests
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../plone/">
        Installation und Konfiguration im CMS Plone
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lizenz/">
        Lizenz
      </a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10">
          Anhang
          <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Anhang" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
          Anhang
        </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../anhang1/">
        Anhang 1
      </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#scope-der-funktionstests">
    Scope der Funktionstests
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#test-verzeichnis-im-package">
    Test-Verzeichnis im Package
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#ausfuhrung-der-tests">
    Ausführung der Tests
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="automatische-testverfahren">Automatische Testverfahren</h1>
<p>Die Entwicklung von edi.substanceforms wurde im grundsätzlichen Ansatz testgetrieben durchgeführt.
Wie im Kapitel "Bestandteile" beschrieben, wurden die Inhaltstypen <strong>Datenbank</strong> und <strong>Tabelle</strong> sowie 
alle Ansichten (Views) und Formulare (Forms) wurden zunächst mit dem Generator mr.bob generiert.</p>
<p>Im Zuge der Generierung werden bereits Templates für funktionale Tests im Package angelegt. Ausserdem
werden in der Datei setup.py des Packages die Abhängigkeiten zur Durchführung automatisierter Tests
vermerkt. Um die automatisierten Tests ausführen zu können müssen diese Abhängigkeiten zunächst installiert
werden. Dazu muss folgende Änderung in der buildout.cfg vorgenommen werden:</p>
<pre><code>
eggs = 
    ...
    edi.substanceforms [test]
</code></pre>
<p>Danach muss der Buildout mit dem Befehlt ./bin/buildout im Wurzelverzeichnis der Installation erneut
durchgeführt werden.</p>
<h2 id="scope-der-funktionstests">Scope der Funktionstests</h2>
<p>Funktionstests im Web-CMS Plone verfügen über eine echte (objektorientierte) Datenbank und eine 
Komponentenarchitektur. Darüber hinaus kann mit Python-Code ein Browser simuliert werden. Wenn mit dem 
Python-Browser auf eine Seite zugegriffen wird, ist die komplette Transaktionsmaschinerie von Plone im Einsatz. 
Damit dies funktioniert, verpackt die Testschicht die Datenbank in einen Demospeicher, der einen regulären 
Speicher kapselt. Wird von den Tests etwas in die Datenbank geschrieben, speichert der Demostorage es in 
temporären Feldern des Arbeitsspeichers. Nach jedem Test wird der Demostorage gelöscht. Damit sollten die 
funktionalen Tests fast so schnell ablaufen wie Integrationstests oder gar Unit-Tests und das trotz des
zusätzliche Overheads, der durch das Durchlaufen der Plone-Transaktionsmaschine aufgebaut wird.</p>
<p>Zu beachten ist dabei, dass der simulierte Browser reinen Python-Code darstellt. Javascript-Code kann somit
im Rahmen der funktionalen Tests nicht getestet werden.</p>
<p>Ebenso wurden die Datenbank-Transaktionen zur relationalen Datenbank auf Basis von PostgreSQL nicht in die
Funktionstests einbezogen. Die tatsächliche Kundenkonfiguration wird erheblich von einer Test- oder
Entwicklungskonfiguration abweichen. Die generische Implementierung der notwendigen technischen Voraussetzungen 
für die Installation und Konfiguration der Testumgebung ist nicht möglich.</p>
<p>Die in edi.substanceforms implementierten Funktionstests umfassen die folgenden Themen:</p>
<ul>
<li>fehlerfreie Installation des AddOns im Content-Management-System Plone</li>
<li>Anlegen der Inhaltstypen Datenbank und Tabelle</li>
<li>Assoziation der View- und Formklassen zu den Inhaltstypen</li>
</ul>
<h2 id="test-verzeichnis-im-package">Test-Verzeichnis im Package</h2>
<p>Alle für die Ausführung der Funktionstests mittels Testroboter ((plone.app.testrobot)[https://pypi.org/project/plone.app.robotframework/]) notwendigen Konfigurationsdateien sowie die Dateien mit den Funktionstests befinden sich 
im Verzeichnis <strong>../src/edi/substanceforms/tests/..</strong>:</p>
<pre><code>
...src/edi/substanceforms/tests$ ls -la
total 132
drwxrwxr-x 4 plone_buildout plone_buildout 4096 Dec  4 13:03 .
drwxrwxr-x 9 plone_buildout plone_buildout 4096 Dec  4 12:28 ..
-rw-rw-r-- 1 plone_buildout plone_buildout    0 Nov 25 10:50 __init__.py
drwxrwxr-x 2 plone_buildout plone_buildout 4096 Dec  4 10:45 __pycache__
drwxrwxr-x 2 plone_buildout plone_buildout 4096 Nov 25 10:50 robot
-rw-rw-r-- 1 plone_buildout plone_buildout 3042 Nov 25 10:50 test_ct_datenbank.py
...
-rw-rw-r-- 1 plone_buildout plone_buildout 1564 Dec  4 11:33 test_view_update_mixture-form.py
-rw-rw-r-- 1 plone_buildout plone_buildout 1539 Dec  4 11:33 test_view_update_powder_form.py
-rw-rw-r-- 1 plone_buildout plone_buildout 1570 Dec  4 11:33 test_view_update_substance-form.py
-rw-rw-r-- 1 plone_buildout plone_buildout 1518 Dec  4 11:33 test_view_update_view.py

</code></pre>
<h2 id="ausfuhrung-der-tests">Ausführung der Tests</h2>
<p>Die Tests für edi.substanceforms können aus dem Buildout-Verzeichnis heraus mit dem folgenden
Befehl ausgeführt werden:</p>
<pre><code>$ ./bin/test edi.substanceforms

...
  Ran 65 tests with 0 failures, 0 errors, 0 skipped in 3.067 seconds.
Tearing down left over layers:
  Tear down edi.substanceforms.testing.EdiSubstanceformsLayer:IntegrationTesting in 0.000 seconds.
  Tear down edi.substanceforms.testing.EdiSubstanceformsLayer in 0.004 seconds.
  Tear down plone.app.contenttypes.testing.PloneAppContenttypes in 0.020 seconds.
  Tear down plone.app.event.testing.PAEventLayer in 0.004 seconds.
  Tear down plone.app.testing.layers.PloneFixture in 0.028 seconds.
  Tear down plone.testing.zope.Startup in 0.003 seconds.
  Tear down plone.testing.zca.LayerCleanup in 0.001 seconds.
</code></pre>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Aufbau des Software-Packages" class="md-footer__link md-footer__link--prev" href="../aufbau/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Aufbau des Software-Packages
            </div>
</div>
</a>
<a aria-label="Next: Installation und Konfiguration im CMS Plone" class="md-footer__link md-footer__link--next" href="../plone/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Installation und Konfiguration im CMS Plone
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
            Material for MkDocs
          </a>
 ... <a class="link--pdf-download" download href="../pdf/document.pdf" title="PDF">download PDF</a></div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": null}</script>
<script src="../assets/javascripts/bundle.1e84347e.min.js"></script>
</body>
</html>